# Heap（堆）

---

## 定義
Heap 是一種 **特殊的完全二元樹（Complete Binary Tree）**，滿足 **父子節點的大小關係**：

- **Max Heap（大根堆）**：每個父節點的值 ≥ 其子節點的值  
- **Min Heap（小根堆）**：每個父節點的值 ≤ 其子節點的值  

> 完全二元樹：除了最後一層之外，每層節點都填滿，最後一層節點靠左排列

---

## 特點
- 方便用 **陣列表示**
- 常用於 **優先隊列（Priority Queue）**
- 插入與刪除操作需維持堆的性質
- 對於搜尋任意節點不是很快（不是 BST）

---

## 範例

### Max Heap
```c
        50
       /  \
     30    40
    / \    /
   20 15  10
```

### Min Heap
```c
        10
       /  \
     20    15
    / \    /
   30 40 50
```

## 操作
1. **插入（Insert）**
   - 加到最後一個節點後，再向上調整（Heapify Up）
   - 時間複雜度：O(log n)

2. **刪除（Delete）**
   - 通常刪除根節點
   - 將最後節點移到根，向下調整（Heapify Down）
   - 時間複雜度：O(log n)

3. **查找最大/最小值**
   - Max Heap：最大值在根 → O(1)  
   - Min Heap：最小值在根 → O(1)

---

## 小結
- Heap = **完全二元樹 + 父子大小關係**
- **Max Heap** 用於快速取得最大值  
- **Min Heap** 用於快速取得最小值  
- 適合實作 **優先隊列** 或 **排序演算法（Heap Sort）**

# Tree 與 Heap 的差別比較表

| 比較項目 | Tree（一般樹 / BST） | Heap（堆） |
|---------|--------------------|-----------|
| 基本定義 | 由節點與邊組成的階層式資料結構 | 一種特殊的完全二元樹 |
| 節點數限制 | 一般樹：不限<br>二元樹：最多 2 個子節點 | 每個節點最多 2 個子節點 |
| 結構限制 | 不一定是完全樹 | **一定是完全二元樹** |
| 節點順序關係 | BST：左 < 根 < 右<br>一般樹無大小規則 | 父子節點有大小關係（Max / Min） |
| 排序性 | BST 中序走訪可得到排序結果 | **不保證排序** |
| 根節點特性 | 不一定是最大或最小 | 根一定是最大值或最小值 |
| 搜尋效率 | BST：平均 O(log n)<br>最壞 O(n) | 搜尋任意值 O(n) |
| 插入效率 | BST：O(log n)（平衡時） | O(log n) |
| 刪除效率 | BST：O(log n)（平衡時） | O(log n)（刪除根） |
| 查找最大/最小 | BST：O(h) | **O(1)** |
| 陣列表示 | 不方便(**適合用Linked List**) | **非常適合** |
| 主要用途 | 搜尋、排序、階層結構 | 優先隊列、排程 |
| 常見應用 | BST、AVL、Red-Black Tree | Priority Queue、Heap Sort |

---

## 重點整理（考試常考）

- **Heap 一定是完全二元樹**
- **Heap 只保證根節點最大 / 最小，不保證整體排序**
- **BST 強調搜尋與排序**
- **Heap 強調快速取得最大 / 最小值**
